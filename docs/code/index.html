<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-components/code/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Code | Motion Canvas</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://motioncanvas.io/img/banner.png"><meta data-rh="true" name="twitter:image" content="https://motioncanvas.io/img/banner.png"><meta data-rh="true" property="og:url" content="https://motioncanvas.io/docs/code"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="typescript, animation, library"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code | Motion Canvas"><meta data-rh="true" name="description" content="The Code node is used for displaying code snippets."><meta data-rh="true" property="og:description" content="The Code node is used for displaying code snippets."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://motioncanvas.io/docs/code"><link data-rh="true" rel="alternate" href="https://motioncanvas.io/docs/code" hreflang="en"><link data-rh="true" rel="alternate" href="https://motioncanvas.io/docs/code" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q6Z7BJ83RF-dsn.algolia.net" crossorigin="anonymous"><script type="importmap">{"imports":{"@motion-canvas/core":"/modules/core-7f971556.js","@motion-canvas/2d":"/modules/2d-fea56518.js","@motion-canvas/2d/jsx-runtime":"/modules/2d-fea56518.js"}}</script>

<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Motion Canvas RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Motion Canvas Atom Feed">





<link rel="search" type="application/opensearchdescription+xml" title="Motion Canvas" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.dd294994.css">
<link rel="preload" href="/assets/js/runtime~main.8bc48722.js" as="script">
<link rel="preload" href="/assets/js/main.af82ffbc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_G6ar" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="currentColor"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Motion Canvas Logo" class="themedImage_RWGG themedImage--light_riBm"><img src="/img/logo_dark.svg" alt="Motion Canvas Logo" class="themedImage_RWGG themedImage--dark_Dsi0"></div><b class="navbar__title text--truncate">Motion Canvas</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/api/core">API</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button><div class="toggle_OLSw colorModeToggle_x44X"><button class="clean-btn toggleButton_wYmb toggleButtonDisabled_vaDU" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg height="24px" width="24px" viewBox="0 0 24 24" fill="currentColor" class="lightToggleIcon_Sxwe"><path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg height="24px" width="24px" viewBox="0 0 24 24" fill="currentColor" class="darkToggleIcon_Yem1"><path d="M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="root_TZLv loading_lRyv"><div class="badge_yk5a"><small><strong></strong> <!-- -->stars</small></div><a href="https://github.com/motion-canvas/motion-canvas" class="icon_QWMH"><svg viewBox="0 0 98 96" width="20" height="20" aria-hidden="true"><path d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></a></div><div class="root_TZLv loading_lRyv"><div class="badge_yk5a"><small><strong></strong> <!-- -->online</small></div><a href="https://chat.motioncanvas.io" class="icon_QWMH"><svg viewBox="0 -2 127.14 96.36" width="20" height="20" aria-hidden="true"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z" fill="currentColor"></path></svg></a></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_UyTV docsWrapper_BqXd"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type="button"></button><div class="docPage_pOTq"><aside class="theme-doc-sidebar-container docSidebarContainer_aIKW"><div class="sidebarViewport_DwR9"><div class="sidebar_vJCc"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qiME"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/flow">Animation flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hierarchy">Scene hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/positioning">Positioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/layouts">Layouts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signals">Signals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tweening">Tweening</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/time-events">Time Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/transitions">Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/media">Media</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/rendering">Rendering</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rendering&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/presentation">Presentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration">Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/components">Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;Components&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/docs/code">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/grammars">Grammars</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nodes">LaTeX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bezier-curves">Bézier Curves</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spline">Spline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/path">Path</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/custom-components">Custom Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/code-block">CodeBlock (Deprecated)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/advanced">Advanced</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/migration">Migration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Migration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_fv3b"><div class="container padding-top--md padding-bottom--lg"><div><div class="row"><div class="col docItemCol_YAwJ"><div class="docItemContainer_Rv5Z"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_zCmv" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" style="width:16px;height:16px;margin-top:0.1rem" class="breadcrumbHomeIcon_JFrk"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/components"><span itemprop="name">Components</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Code</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type="button" class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Code</h1><div class="root_icgl language-tsx previewOnly_FFUw"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG active_qxTr" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;const number = 7;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">all</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">replace</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">findFirstRange</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;number&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;variable&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">prepend</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">function example() {\n  </span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\n}</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">selection</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">findFirstRange</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;variable&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">all</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;const number = 7;&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">selection</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token constant" style="color:var(--hl-constant)">DEFAULT</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>The <a href="/api/2d/components/Code"><code>Code</code></a> node is used for displaying code snippets.
It supports syntax highlighting and a handful of different methods for animating
the code.</p><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="parsing-and-highlighting">Parsing and Highlighting<a href="#parsing-and-highlighting" class="hash-link" aria-label="Direct link to Parsing and Highlighting" title="Direct link to Parsing and Highlighting">​</a></h2><p>First things first, if you just copy any of the snippets in this tutorial you&#x27;ll
notice that the displayed code has a uniform color. The default highlighter uses
<a href="https://lezer.codemirror.net/" target="_blank" rel="noopener noreferrer"><code>Lezer</code></a> to parse and highlighting the code but
to do that it needs the grammar for the language you&#x27;re using. You can set that
up in your project configuration file.</p><p>First, install the grammar for your language. You can check out this
non-exhaustive <a href="/docs/grammars">list of available grammars</a>. For this tutorial,
you should install the <code>javascript</code> grammar:</p><div class="language-bash codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-bash codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token function" style="color:var(--hl-function)">npm</span><span class="token plain"> i @lezer/javascript</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, in your project configuration, instantiate a new <code>LezerHighlighter</code> using
the imported grammar, and set it as the default highlighter:</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockTitle_zAEH">src/project.ts</div><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">makeProject</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/core&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> example </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;./scenes/example?scene&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@lezer/javascript&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token plain">defaultHighlighter </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--hl-class)">LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeProject</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  scenes</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token plain">example</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now all <code>Code</code> nodes in your project will use <code>@lezer/javascript</code> to parse and
highlight the snippets. If you want to use more than one language, check out the
<a href="#multiple-languages">Multiple Languages</a> section.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_qNG0"><div class="admonitionHeading_l909"><span class="admonitionIcon_UNbs"><svg viewBox="0 0 24 24" fill="currentColor" class="icon_Fw4I"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg></span>info</div><div class="admonitionContent_oUmQ"><p>Note that, by default, the JavaScript parser doesn&#x27;t support JSX or TypeScript.
You can enable support for these via <a href="https://lezer.codemirror.net/docs/guide/#dialects" target="_blank" rel="noopener noreferrer">dialects</a>. The dialects
available for a given parser are usually listed in the documentation of the
grammar package.</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token plain">defaultHighlighter </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--hl-class)">LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token function" style="color:var(--hl-function)">configure</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// Provide a space-separated list of dialects to enable:</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    dialect</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;jsx ts&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="defining-code">Defining Code<a href="#defining-code" class="hash-link" aria-label="Direct link to Defining Code" title="Direct link to Defining Code">​</a></h2><p>The code to display is set via the <a href="/api/2d/components/Code#code"><code>code</code></a>
property. In the simplest case, you can just use a string:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;const number = 7;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>However, usually code snippets contain multiple lines of code. It&#x27;s much more
convenient to use a template string for this (denoted using the backtick
character <code>`</code>):</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  const number = 7;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice two things here:</p><ul><li><p>The code snippet ignores the indentation of the template string itself. The
template string preserves all whitespace characters, so any additional spaces
or tabs at the beginning of each line would be included in the snippet.</p></li><li><p>The backslash character (<code>\</code>) at the very beginning is used to escape the
first newline character. This lets the snippet start on a new line without
actually including an empty line at the beginning. Without the slash, the
equivalent code would have to be written as:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  const number = 7;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>Template strings allow you to easily include variables in your code snippets
with the <code>${}</code> syntax. In the example below, <code>${name}</code> is replaced with the
value of the <code>name</code> variable (which is <code>number</code> in this case):</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> name </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;number&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  const </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)">name</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"> = 7;</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Any valid JavaScript expression inside the <code>${}</code> syntax will be included in the
code snippet:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> isRed </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  const color = &#x27;</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)">isRed </span><span class="token tag script language-javascript template-string interpolation operator" style="color:var(--hl-punctuation)">?</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)"> </span><span class="token tag script language-javascript template-string interpolation string" style="color:var(--hl-string)">&#x27;red&#x27;</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)"> </span><span class="token tag script language-javascript template-string interpolation operator" style="color:var(--hl-punctuation)">:</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)"> </span><span class="token tag script language-javascript template-string interpolation string" style="color:var(--hl-string)">&#x27;blue&#x27;</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">&#x27;;</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="using-signals">Using Signals<a href="#using-signals" class="hash-link" aria-label="Direct link to Using Signals" title="Direct link to Using Signals">​</a></h2><p>If you try to use signals inside the <code>${}</code> syntax, you&#x27;ll notice that they don&#x27;t
work as expected. Invoking a signal inside a template string uses its current
value and then never updates the snippet again, even if the signal changes:</p><div class="root_icgl language-tsx codeOnly_lee0"><div class="layoutControl_X__N"><button class="icon_brRG active_qxTr" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">makeScene2D</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Code</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">waitFor</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/core&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> nameSignal </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;number&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">const </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation function" style="color:var(--hl-function)">nameSignal</span><span class="token tag script language-javascript template-string interpolation punctuation" style="color:var(--hl-punctuation)">(</span><span class="token tag script language-javascript template-string interpolation punctuation" style="color:var(--hl-punctuation)">)</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"> = 7;</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token function" style="color:var(--hl-function)">nameSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;newValue&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// The code snippet still displays &quot;number&quot; instead of &quot;newValue&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Trying to pass the signal without invoking it is even worse. Since each signal
is a function, it will be stringified and included in the snippet:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> nameSignal </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;number&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">const </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)">nameSignal</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"> = 7;</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token function" style="color:var(--hl-function)">nameSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;newValue&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>This happens because template strings are parsed immediately when our code is
executed. To work around this, you can use a custom <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates" target="_blank" rel="noopener noreferrer">tag function</a>
called <a href="/api/2d/code#CODE"><code>CODE</code></a>. It allows the <code>Code</code> node to parse the
template string in a custom way and correctly support signals. It&#x27;s really easy
to use, simply put the <code>CODE</code> tag function before your template string:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> nameSignal </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;number&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// Note the CODE tag function here:</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript constant" style="color:var(--hl-constant)">CODE</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">const </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)">nameSignal</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"> = 7;</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token function" style="color:var(--hl-function)">nameSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;newValue&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// Now the code snippet is updated accordingly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>The value returned by <code>CODE</code> can itself be nested in other template strings:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> implementation </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">    console.log(&#x27;Hello!&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">    return 7;</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> method </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">  greet() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)"></span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation">implementation</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">  }</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> klass </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">class Example {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)"></span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation">method</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)"></span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"> </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">klass</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"> </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// class Example {</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">//   greet() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">//     console.log(&#x27;Hello!&#x27;);</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">//     return 7;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">//   }</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// }</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You might have noticed that these examples used a specialized type of signal
created using <a href="/api/2d/components/Code#createSignal"><code>Code.createSignal()</code></a>.
While the generic <a href="/api/core/signals#createSignal"><code>createSignal()</code></a> would work
fine in these simple examples, the specialized signal will shine once you start
animating your code snippets.</p><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="animating-code">Animating Code<a href="#animating-code" class="hash-link" aria-label="Direct link to Animating Code" title="Direct link to Animating Code">​</a></h2><p>The <code>Code</code> node comes with a few different techniques for animating the code
depending on the level of control you need.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="diffing">Diffing<a href="#diffing" class="hash-link" aria-label="Direct link to Diffing" title="Direct link to Diffing">​</a></h3><p>The default method for animating code is diffing. It&#x27;s used whenever you tween
the <code>code</code> property:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  const number = 9;</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;const nine = 9;&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">wait</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">back</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">wait</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>This method uses the patience diff algorithm to determine the differences
between the old and new code snippets. It then animates the changes accordingly.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="append-and-prepend"><code>append</code> and <code>prepend</code><a href="#append-and-prepend" class="hash-link" aria-label="Direct link to append-and-prepend" title="Direct link to append-and-prepend">​</a></h3><p>For cases where you want to add some code at the beginning or end of the
snippet, you can use the <a href="/api/2d/code/CodeSignalContext#append"><code>append</code></a> and
<a href="/api/2d/code/CodeSignalContext#prepend"><code>prepend</code></a> methods. They can either
modify the code immediately or animate the changes over time:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// append immediately</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">const one = 1;</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// animate using the signal signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;\nconst two = 2;&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// animate using the template tag signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">const three = 3;</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// prepend works analogically</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">prepend</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;// example\n&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="insert-replace-and-remove"><code>insert</code>, <code>replace</code>, and <code>remove</code><a href="#insert-replace-and-remove" class="hash-link" aria-label="Direct link to insert-replace-and-remove" title="Direct link to insert-replace-and-remove">​</a></h3><p>For more granular control over the changes, you can use
<a href="/api/2d/code/CodeSignalContext#insert"><code>insert</code></a>,
<a href="/api/2d/code/CodeSignalContext#replace"><code>replace</code></a>, and
<a href="/api/2d/code/CodeSignalContext#remove"><code>remove</code></a> to modify the code at specific
points. Check out <a href="#code-ranges">Code Ranges</a> for more information on how to
specify points in your code snippets.</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  console.log(&#x27;Hello!&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// insert code at line 2, column 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">insert</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token number" style="color:var(--hl-number)">2</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;  return 7;\n&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// replace the word &quot;Hello!&quot; with &quot;Goodbye!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">replace</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">word</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">15</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;Goodbye!&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// remove line 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">remove</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">lines</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">2</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// animate multiple changes at the same time</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">all</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">replace</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">word</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">9</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">7</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;greet&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">replace</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">word</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">15</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">8</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;Hello!&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="edit"><code>edit</code><a href="#edit" class="hash-link" aria-label="Direct link to edit" title="Direct link to edit">​</a></h3><p>The <a href="/api/2d/code/CodeSignalContext#edit"><code>edit</code></a> method offers a different way
of defining code transitions. It&#x27;s used together with the
<a href="/api/2d/code#insert"><code>replace</code></a>, <a href="/api/2d/code#insert"><code>insert</code></a>, and
<a href="/api/2d/code#remove"><code>remove</code></a> helper functions that are inserted into the
template string. They let you specify the changes in a more visual way, without
having to know the exact positions in the code:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">edit</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">  </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation function" style="color:var(--hl-function)">insert</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string interpolation template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string interpolation template-string string" style="color:var(--hl-string)">// This is a comment</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string interpolation template-string string" style="color:var(--hl-string)">  </span><span class="token template-string interpolation template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)">console.log(&quot;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation function" style="color:var(--hl-function)">replace</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string interpolation string" style="color:var(--hl-string)">&#x27;Hello!&#x27;</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">,</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:var(--hl-string)">&#x27;Goodbye!&#x27;</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)">&quot;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)"></span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation function" style="color:var(--hl-function)">remove</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string interpolation template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string interpolation template-string string" style="color:var(--hl-string)">  return 7;</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string interpolation template-string string" style="color:var(--hl-string)"></span><span class="token template-string interpolation template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string interpolation punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)">}</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="signals">Signals<a href="#signals" class="hash-link" aria-label="Direct link to Signals" title="Direct link to Signals">​</a></h3><p>Notice that all the methods used above are not invoked on the <code>Code</code> node but
rather on its <code>code</code> property. It may seem unnecessarily verbose but there&#x27;s a
good reason for it: the <code>code</code> property is a specialized code signal, just like
the ones created by
<a href="/api/2d/components/Code#createSignal"><code>Code.createSignal()</code></a>. This means that
all the animation methods are also available on your own signals:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> message </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">Hello, world!</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> body </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">console.log(&#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation">message</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)">&#x27;);</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript constant" style="color:var(--hl-constant)">CODE</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  </span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token tag script language-javascript template-string interpolation" style="color:var(--hl-tag)">body</span><span class="token tag script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">all</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">message</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;Goodbye, world!&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    body</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">\n  return 7;</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Code signals can also be nested in the template strings passed to the animation
methods:</p><div class="root_icgl language-tsx codeOnly_lee0"><div class="layoutControl_X__N"><button class="icon_brRG active_qxTr" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">createRef</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">,</span><span class="token imports"> waitFor</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/core&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;// example&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> body </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token constant" style="color:var(--hl-constant)">CODE</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">console.log(&#x27;Hello!&#x27;);</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// Notice how the CODE tag is not used here because</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// &quot;append&quot; already supports nested signals:</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">append</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">function hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">  </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">${</span><span class="token template-string interpolation">body</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:var(--hl-punctuation)">}</span><span class="token template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token template-string string" style="color:var(--hl-string)">}</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// The &quot;body&quot; signal remains reactive after the append animation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">body</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token template-string string" style="color:var(--hl-string)">console.log(&#x27;Goodbye!&#x27;);</span><span class="token template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="code-ranges">Code Ranges<a href="#code-ranges" class="hash-link" aria-label="Direct link to Code Ranges" title="Direct link to Code Ranges">​</a></h2><p>A <a href="/api/2d/code#CodeRange"><code>CodeRange</code></a> is used to specify a continuous span of
characters using line and column numbers. It can be used for editing the code,
visually selecting a part of it, or querying the positions and sizes of
characters.</p><p>Code ranges have the following structure:</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line prettier-ignore" style="color:var(--hl-color)"><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token plain">startLine</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> startColumn</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token plain">endLine</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> endColumn</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, to select the first three characters of the second line, you would
use the following range:</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line prettier-ignore" style="color:var(--hl-color)"><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">3</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Keep in mind that both lines and columns are zero-based. Additionally, you
should think of columns as being located on the left side of the characters,
meaning that if you want to include the character at column <code>n</code> you should use
<code>n + 1</code> as the end column.</p><p>For convenience, the <a href="/api/2d/code#word"><code>word</code></a> and
<a href="/api/2d/code#lines"><code>lines</code></a> helper functions are provided to create some of
the common types of ranges:</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// a range starting at line 1, column 3,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// spanning 3 characters:</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token function" style="color:var(--hl-function)">word</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">3</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// a range starting at line 1, column 3,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// spanning until the end of the line:</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token function" style="color:var(--hl-function)">word</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// a range containing lines from 1 to 3 (inclusive):</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token function" style="color:var(--hl-function)">lines</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// a range containing line 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token function" style="color:var(--hl-function)">lines</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">2</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you create a <code>Code</code> node, you can use its
<a href="/api/2d/components/Code#findFirstRange"><code>findFirstRange</code></a>,
<a href="/api/2d/components/Code#findAllRanges"><code>findAllRanges</code></a>, and
<a href="/api/2d/components/Code#findLastRange"><code>findLastRange</code></a> methods to find the
ranges that contain a specific string or match the given regular expression:</p><div class="root_icgl language-tsx codeOnly_lee0"><div class="layoutControl_X__N"><button class="icon_brRG active_qxTr" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">makeScene2D</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Code</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">createRef</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">,</span><span class="token imports"> waitFor</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/core&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function example() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  console.log(&#x27;Hello!&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token property-access">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">replace</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// find the range of &quot;example&quot; and replace it with &quot;greet&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">findFirstRange</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;example&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token string" style="color:var(--hl-string)">&#x27;greet&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="code-selection">Code Selection<a href="#code-selection" class="hash-link" aria-label="Direct link to Code Selection" title="Direct link to Code Selection">​</a></h2><p>The <a href="/api/2d/code/CodeSignalContext#selection"><code>selection</code></a> property can be used
to visually distinguish a part of the code snippet. The selection is specified
using an individual <a href="#code-ranges"><code>code range</code></a> or an array of ranges:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  console.log(&#x27;Hello&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// select all instances of &quot;hello&quot; (case-insensitive)</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">selection</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">findAllRanges</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">hello</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">gi</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// select line 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">selection</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token function" style="color:var(--hl-function)">lines</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">1</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// reset the selection</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">selection</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token constant" style="color:var(--hl-constant)">DEFAULT</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">0.6</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">yield</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">waitFor</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token number" style="color:var(--hl-number)">0.3</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="querying-positions-and-sizes">Querying Positions and Sizes<a href="#querying-positions-and-sizes" class="hash-link" aria-label="Direct link to Querying Positions and Sizes" title="Direct link to Querying Positions and Sizes">​</a></h2><p><a href="/api/2d/components/Code#getPointBBox"><code>getPointBBox</code></a> and
<a href="/api/2d/components/Code#getSelectionBBox"><code>getSelectionBBox</code></a> can be used to
retrieve the position and size of a specific character or a range of characters,
respectively. The returned value is a <a href="/api/core/types/BBox"><code>bounding box</code></a> in
the local space of the <code>Code</code> node.</p><p>The following example uses <code>getSelectionBBox</code> to draw a rectangle around the
word <code>log</code>:</p><div class="root_icgl language-tsx"><div class="layoutControl_X__N"><button class="icon_brRG" title="Source code"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></svg></button><button class="icon_brRG active_qxTr" title="Editor with preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"></path></svg></button><button class="icon_brRG" title="Preview"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg></button></div><div class="preview_C9cZ" style="aspect-ratio:4"><div>Press play to preview the animation</div></div><div class="controls_R4ai"><div class="section_UscS"></div><div class="section_UscS"><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg></button><button class="icon_brRG"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg></button></div><div class="section_UscS"></div></div><div class="editor_xQGp"><div class="source_Dq6N language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token spread operator" style="color:var(--hl-punctuation)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">default</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">makeScene2D</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token keyword" style="color:var(--hl-keyword)">function</span><span class="token operator" style="color:var(--hl-punctuation)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> code </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:var(--hl-function)">createRef</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&lt;</span><span class="token generic-function generic class-name" style="color:var(--hl-class)">Code</span><span class="token generic-function generic class-name operator" style="color:var(--hl-punctuation)">&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">ref</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript" style="color:var(--hl-tag)">code</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontSize</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">28</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">fontFamily</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;JetBrains Mono&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">\</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  console.log(&#x27;Hello&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> range </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">createSignal</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--hl-punctuation)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> range </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">findFirstRange</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token string" style="color:var(--hl-string)">&#x27;log&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> bboxes </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">getSelectionBBox</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">range</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// &quot;getSelectionBBox&quot; returns an array of bboxes,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// one for each line in the range. You can just</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// use the first one for this example.</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> first </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> bboxes</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token number" style="color:var(--hl-number)">0</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token keyword" style="color:var(--hl-keyword)">return</span><span class="token plain"> first</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">expand</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token number" style="color:var(--hl-number)">4</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token number" style="color:var(--hl-number)">8</span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token function" style="color:var(--hl-function)">code</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Rect</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">offset</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">position</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript function" style="color:var(--hl-function)">range</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">(</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">)</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">.</span><span class="token tag script language-javascript property-access" style="color:var(--hl-tag)">position</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">size</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript function" style="color:var(--hl-function)">range</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">(</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">)</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">.</span><span class="token tag script language-javascript property-access" style="color:var(--hl-tag)">size</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">lineWidth</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">4</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">stroke</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript string" style="color:var(--hl-string)">&#x27;white&#x27;</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">      </span><span class="token tag attr-name" style="color:var(--hl-variable)">radius</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">8</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="custom-themes">Custom Themes<a href="#custom-themes" class="hash-link" aria-label="Direct link to Custom Themes" title="Direct link to Custom Themes">​</a></h2><p><code>LezerHighlighter</code> uses CodeMirror&#x27;s
<a href="https://codemirror.net/examples/styling/" target="_blank" rel="noopener noreferrer"><code>HighlightStyle</code></a> to assign colors to
specific code tokens. By default, the
<a href="/api/2d/code#DefaultHighlightStyle"><code>DefaultHighlightStyle</code></a> is used. You can
specify your own style by passing it as the second argument to the
<code>LezerHighlighter</code> constructor:</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">HighlightStyle</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@codemirror/language&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@lezer/highlight&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@lezer/javascript&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> MyStyle </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> HighlightStyle</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token function" style="color:var(--hl-function)">define</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token punctuation" style="color:var(--hl-punctuation)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">tag</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token plain">keyword</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> color</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;red&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">tag</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token function" style="color:var(--hl-function)">function</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token plain">variableName</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> color</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;yellow&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">tag</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token builtin" style="color:var(--hl-keyword)">number</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> color</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;blue&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">tag</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> tags</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token builtin" style="color:var(--hl-keyword)">string</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> color</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;green&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">]</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token plain">defaultHighlighter </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--hl-class)">LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> MyStyle</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="multiple-languages">Multiple Languages<a href="#multiple-languages" class="hash-link" aria-label="Direct link to Multiple Languages" title="Direct link to Multiple Languages">​</a></h2><p>You can configure highlighters on a per-node basis using the
<a href="/api/2d/components/Code#highlighter"><code>highlighter</code></a> property. This will
override the default highlighter set in the project configuration file:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports maybe-class-name">Code</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">LezerHighlighter</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports">parser</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@lezer/rust&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> </span><span class="token maybe-class-name">RustHighlighter</span><span class="token plain"> </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--hl-class)">LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// this node uses the default parser</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript operator" style="color:var(--hl-punctuation)">-</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">function hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  console.log(&#x27;Hello!&#x27;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">Code</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// this node uses the Rust parser</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">highlighter</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript maybe-class-name" style="color:var(--hl-tag)">RustHighlighter</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">offsetX</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">1</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">x</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript number" style="color:var(--hl-number)">400</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">fn hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  println!(&quot;Hello!&quot;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It can be useful to create a custom component for the languages you often use.
You can use the <a href="/api/2d/utils#withDefaults"><code>withDefaults</code></a> helper function to
quickly extend any node with your own defaults:</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockTitle_zAEH">src/nodes/RustCode.ts</div><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> withDefaults</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@motion-canvas/2d&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;@lezer/rust&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> RustHighlighter </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">new</span><span class="token plain"> </span><span class="token class-name" style="color:var(--hl-class)">LezerHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">parser</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--hl-keyword)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">const</span><span class="token plain"> RustCode </span><span class="token operator" style="color:var(--hl-punctuation)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--hl-function)">withDefaults</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain">Code</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--hl-punctuation)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  highlighter</span><span class="token operator" style="color:var(--hl-punctuation)">:</span><span class="token plain"> RustHighlighter</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">}</span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:var(--hl-color);--prism-background-color:var(--hl-background)"><div class="codeBlockTitle_zAEH">src/scenes/example.tsx</div><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:var(--hl-color)"><span class="token keyword" style="color:var(--hl-keyword)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--hl-punctuation)">{</span><span class="token imports maybe-class-name">RustCode</span><span class="token imports punctuation" style="color:var(--hl-punctuation)">}</span><span class="token plain"> </span><span class="token keyword" style="color:var(--hl-keyword)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--hl-string)">&#x27;../nodes/RustCode&#x27;</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token comment" style="color:var(--hl-comment);font-style:var(--hl-comment-style)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">view</span><span class="token punctuation" style="color:var(--hl-punctuation)">.</span><span class="token method function property-access" style="color:var(--hl-function)">add</span><span class="token punctuation" style="color:var(--hl-punctuation)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">&lt;</span><span class="token tag class-name" style="color:var(--hl-class)">RustCode</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">    </span><span class="token tag attr-name" style="color:var(--hl-variable)">code</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:var(--hl-punctuation)">=</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">{</span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">fn hello() {</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">  println!(&quot;Hello!&quot;);</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)">}</span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag script language-javascript template-string string" style="color:var(--hl-string)"></span><span class="token tag script language-javascript template-string template-punctuation string" style="color:var(--hl-string)">`</span><span class="token tag script language-javascript punctuation" style="color:var(--hl-punctuation)">}</span><span class="token tag" style="color:var(--hl-tag)"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token tag" style="color:var(--hl-tag)">  </span><span class="token tag punctuation" style="color:var(--hl-punctuation)">/&gt;</span><span class="token punctuation" style="color:var(--hl-punctuation)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:var(--hl-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--hl-punctuation)">)</span><span class="token punctuation" style="color:var(--hl-punctuation)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="rendering">Rendering<a href="#rendering" class="hash-link" aria-label="Direct link to Rendering" title="Direct link to Rendering">​</a></h2><p>If you&#x27;re using a Chromium-based browser, you might notice that the code
animations jitter a bit. This happens because the canvas snaps the rendered text
to the nearest pixel which prevents it from moving smoothly. Until we find a way
to fix this, we recommend you use Firefox for rendering.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/motion-canvas/motion-canvas/blob/main/packages/docs/docs/components/code/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" width="24px" height="24px" viewBox="0 0 24 24" class="iconEdit_N_05" aria-hidden="true"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>Edit this page</a></div><div class="col lastUpdated_T23F"><span class="theme-last-updated">Last updated<!-- --> by <b>Jacob</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/components"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Components</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/grammars"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Grammars</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#parsing-and-highlighting" class="table-of-contents__link toc-highlight">Parsing and Highlighting</a></li><li><a href="#defining-code" class="table-of-contents__link toc-highlight">Defining Code</a></li><li><a href="#using-signals" class="table-of-contents__link toc-highlight">Using Signals</a></li><li><a href="#animating-code" class="table-of-contents__link toc-highlight">Animating Code</a><ul><li><a href="#diffing" class="table-of-contents__link toc-highlight">Diffing</a></li><li><a href="#append-and-prepend" class="table-of-contents__link toc-highlight"><code>append</code> and <code>prepend</code></a></li><li><a href="#insert-replace-and-remove" class="table-of-contents__link toc-highlight"><code>insert</code>, <code>replace</code>, and <code>remove</code></a></li><li><a href="#edit" class="table-of-contents__link toc-highlight"><code>edit</code></a></li><li><a href="#signals" class="table-of-contents__link toc-highlight">Signals</a></li></ul></li><li><a href="#code-ranges" class="table-of-contents__link toc-highlight">Code Ranges</a></li><li><a href="#code-selection" class="table-of-contents__link toc-highlight">Code Selection</a></li><li><a href="#querying-positions-and-sizes" class="table-of-contents__link toc-highlight">Querying Positions and Sizes</a></li><li><a href="#custom-themes" class="table-of-contents__link toc-highlight">Custom Themes</a></li><li><a href="#multiple-languages" class="table-of-contents__link toc-highlight">Multiple Languages</a></li><li><a href="#rendering" class="table-of-contents__link toc-highlight">Rendering</a></li></ul></div></div></div><div class="tooltip_lI6R padding--md margin-horiz--md"></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/api/core">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://patreon.com/aarthificial" target="_blank" rel="noopener noreferrer" class="footer__link-item">Patreon<svg width="16" height="16" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://youtube.com/aarthificial" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="16" height="16" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://chat.motioncanvas.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="16" height="16" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" fill="currentColor"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/motion-canvas/motion-canvas" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="16" height="16" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" fill="currentColor"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Motion Canvas. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8bc48722.js"></script>
<script src="/assets/js/main.af82ffbc.js"></script>
</body>
</html>