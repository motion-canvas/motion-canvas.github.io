(self.webpackChunk_motion_canvas_docs=self.webpackChunk_motion_canvas_docs||[]).push([[81],{1532:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1532,e.exports=t},3851:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(7896),r=n(2784),a=n(6277),i=n(1077),c=n(7683),l=n(9817);const s={anchorWithStickyNavbar:"anchorWithStickyNavbar_fF9Z",anchorWithHideOnScrollNavbar:"anchorWithHideOnScrollNavbar_Yh18"};function d(e){let{as:t,id:n,...d}=e;const{navbar:{hideOnScroll:u}}=(0,c.L)();if("h1"===t||!n)return r.createElement(t,(0,o.Z)({},d,{id:void 0}));const m=(0,i.I)({id:"theme.common.headingLinkTitle",message:"Direct link to {heading}",description:"Title for link to heading"},{heading:"string"==typeof d.children?d.children:n});return r.createElement(t,(0,o.Z)({},d,{className:(0,a.Z)("anchor",u?s.anchorWithHideOnScrollNavbar:s.anchorWithStickyNavbar,d.className),id:n}),d.children,r.createElement(l.Z,{className:"hash-link",to:`#${n}`,"aria-label":m,title:m},"\u200b"))}},9573:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(2784);function r(){return o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},o.createElement("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}))}},8046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(7896),r=n(2784);function a(e){let{width:t=24,height:n=24,...a}=e;return r.createElement("svg",(0,o.Z)({viewBox:"0 0 24 24",width:t,height:n,"aria-hidden":!0,fill:"currentColor"},a),r.createElement("path",{d:"M19.8,18.4L14,10.67V6.5l1.35-1.69C15.61,4.48,15.38,4,14.96,4H9.04C8.62,4,8.39,4.48,8.65,4.81L10,6.5v4.17L4.2,18.4 C3.71,19.06,4.18,20,5,20h14C19.82,20,20.29,19.06,19.8,18.4z"}))}},700:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(2784);function r(){return o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},o.createElement("path",{d:"M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"}))}},8015:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(2784);function r(){return o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},o.createElement("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}))}},4974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>re});var o=n(3947),r=n(5448),a=n(7120),i=n(1727),c=n(5565),l=n(1263),s=n(3181),d=n(9573),u=n(2784);function m(){return u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},u.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}))}function p(){return u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},u.createElement("path",{d:"M8 5v14l11-7z"}))}function f(){return u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},u.createElement("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}))}function h(){return u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},u.createElement("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}))}var v=n(700),g=n(8015),k=n(6277);function y(e){let{options:t,value:n,className:o,onChange:r}=e;const a=(0,u.useRef)(),i=(0,u.useRef)(),[c,l]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[a]),u.createElement("div",{ref:a,className:(0,k.Z)("dropdown dropdown--right",c&&"dropdown--show",o)},u.createElement("a",{ref:i,className:"navbar__link",href:"#",onClick:e=>{e.preventDefault(),l(!c)}},t.find((e=>e.value===n))?.name??n),u.createElement("ul",{className:"dropdown__menu"},t.map(((e,o)=>u.createElement("li",{key:e.value},u.createElement("a",{href:"#",className:(0,k.Z)("dropdown__link",n===e.value&&"dropdown__link--active"),onClick:t=>{t.preventDefault(),r(e.value),l(!1),i.current.focus()},onKeyDown:e=>{o!==t.length-1||"Tab"!==e.key||e.shiftKey||(e.preventDefault(),l(!1),i.current.focus())}},e.name))))))}var w=n(6784);const b=new Map,x=new Map,Z=l.Z.canUseDOM?new IntersectionObserver((e=>{for(const r of e){const e=r.target;r.isIntersecting?b.set(e,r.intersectionRatio):b.delete(e)}const t=b.get(S);if(void 0!==t&&t>.75)return;let n=0,o=null;for(const r of x.values()){const e=b.get(r.parent);void 0!==e&&e>n&&(n=e,o=r)}o&&(void 0===t||n>t)&&M(o.setter,o.parent,o.ratio,o.onError).then(o.onBorrow)}),{threshold:[0,.25,.5,.75,1]}):null;let E=null,C=null,N=null,T=null,L=null,S=null,z=1,_=null;async function M(e,t,n,o){if(e!==L){if(T&&S&&T.finalBuffer.parentElement===S&&S?.removeChild(T.finalBuffer),L?.(null),L=e,S=t,_=o,!E){const{Logger:e,Player:t,ProjectMetadata:n,Stage:o,ValueDispatcher:r,DefaultPlugin:a}=await import("@motion-canvas/core"),{makeScene2D:i,Code:c,LezerHighlighter:l}=await import("@motion-canvas/2d");c.defaultHighlighter=new l(w.E.configure({dialect:"jsx ts"})),C=i((function*(){yield})),C.onReplaced=new r(C),E={name:"fiddle",logger:new e,plugins:[a()],scenes:[C],experimentalFeatures:!0},E.meta=new n(E),E.meta.shared.size.set(960),N=new t(E,{size:E.meta.shared.size.get()}),T=new o,T.configure({size:E.meta.shared.size.get()}),N.onRender.subscribe((async()=>{await T.render(N.playback.currentScene,N.playback.previousScene)})),N.onRecalculated.subscribe((()=>{T.finalBuffer.parentElement!==S&&(S?.append(T.finalBuffer),L(N))})),E.logger.onLogged.subscribe((e=>{"error"===e.level&&_?.(`Runtime error: ${e.message}`)}))}return z!==n&&(E.meta.shared.size.set([960,Math.floor(960/n)]),C.onReplaced.current={...C.onReplaced.current,size:E.meta.shared.size.get()},T.configure({size:E.meta.shared.size.get()}),z=n),N.activate(),N.requestReset(),N}}const D=[];function P(e){Object.entries(e).forEach((e=>{let[t,n]=e;var o;D.push({label:t,type:"function"==typeof n?(o=n,o.prototype&&o.prototype.constructor.name?"class":"function"):"variable"})}))}l.Z.canUseDOM&&(import("@motion-canvas/core").then(P).catch(),import("@motion-canvas/2d").then(P).catch());const I=i.Py.define(),R=i.Py.define({map:(e,t)=>{let{from:n,to:o,tooltip:r}=e;return{from:t.mapPos(n),to:t.mapPos(o),tooltip:r}}}),F=c.p.mark({class:"cm-underline"}),J=c.tk.baseTheme({".cm-underline":{textDecoration:"var(--ifm-color-danger-dark) wavy underline"}}),B=i.QQ.define({create:()=>c.p.none,update:(e,t)=>{e=e.map(t.changes);for(const n of t.effects){if(n.is(I)){e=e.update({filter:()=>!1});break}n.is(R)&&(e=e.update({add:[F.range(n.value.from,n.value.to)]}))}return e},provide:e=>c.tk.decorations.from(e)});class H extends i.uU{constructor(e){super(),this.tooltip=e}}const O=i.QQ.define({create:()=>i.Xs.empty,update:(e,t)=>{e=e.map(t.changes);for(const n of t.effects){if(n.is(I)){e=e.update({filter:()=>!1});break}n.is(R)&&(e=e.update({add:[new H(n.value.tooltip).range(n.value.from,n.value.to)]}))}return e},provide:e=>(0,c.bF)(((t,n)=>{let o;return t.state.field(e,!1).between(n,n,((e,t,n)=>(o={pos:e,end:t,create:()=>{const e=document.createElement("div");return e.textContent=n.tooltip,{dom:e}}},!1))),o}))});function V(e,t,n){const o=t.map((t=>(t.from===t.to&&(t=function(e,t){const n=(0,a.qz)(e).resolveInner(t,1);return{from:n.from,to:n.to}}(e.state,t.from)),R.of({tooltip:n,...t}))));return e.dispatch({effects:o}),!0}const U=7;function q(e,t){let n=(0,a.qz)(e).topNode.firstChild,o=null;for(;n;){if(n.type.is("ImportDeclaration")){o=n;break}n=n.nextSibling}if(!o)return null;if(t){const n=e.doc.lineAt(o.from);if(n.from>t.to||n.to<t.from)return null}let r=o;for(;r;){const e=r.nextSibling;if(!e.type.is("ImportDeclaration"))break;r=e}return{from:o.from+U,to:r.to}}function W(e){const{state:t}=e,n=q(t);n&&e.dispatch({effects:[a.SW.of(n)]})}const $=/ *\/\/ ?(\S+) ?(.*)/,j=["highlight-next-line","highlight-start","highlight-end","prettier-ignore"];var A=n(6253);const G=a.Qf.define([{tag:A.pJ.comment,color:"var(--hl-comment)"},{tag:A.pJ.docComment,color:"var(--hl-comment)"},{tag:A.pJ.blockComment,color:"var(--hl-comment)"},{tag:A.pJ.keyword,color:"var(--hl-keyword)"},{tag:A.pJ.number,color:"var(--hl-number)"},{tag:A.pJ.inserted,color:"var(--hl-number)"},{tag:A.pJ.constant(A.pJ.propertyName),color:"var(--hl-constant)"},{tag:A.pJ.attributeName,color:"var(--hl-variable)"},{tag:A.pJ.variableName,color:"var(--hl-variable)"},{tag:A.pJ.propertyName,color:"var(--hl-variable)"},{tag:A.pJ.deleted,color:"var(--hl-string)"},{tag:A.pJ.string,color:"var(--hl-string)"},{tag:A.pJ.attributeValue,color:"var(--hl-string)"},{tag:A.pJ.tagName,color:"var(--hl-tag)"},{tag:A.pJ.typeName,color:"var(--hl-tag)"},{tag:A.pJ.punctuation,color:"var(--hl-punctuation)"},{tag:A.pJ.operator,color:"var(--hl-punctuation)"},{tag:A.pJ.function(A.pJ.variableName),color:"var(--hl-function)"},{tag:A.pJ.function(A.pJ.propertyName),color:"var(--hl-function)"},{tag:A.pJ.className,color:"var(--hl-class)"},{tag:A.pJ.character,color:"var(--hl-char)"}]),Q=c.tk.theme({"&":{fontSize:"var(--ifm-code-font-size)",lineHeight:"21.04px",fontFamily:"var(--ifm-font-family-monospace)",color:"var(--hl-color)",backgroundColor:"var(--hl-background)"},"&.cm-focused .cm-cursor":{borderLeftColor:"var(--hl-color)"},"&.cm-focused":{outline:"none"},".cm-gutters":{backgroundColor:"var(--hl-background)",color:"var(--ifm-color-secondary-darkest)",borderRight:"1px solid var(--ifm-background-color)"},"& .cm-lineNumbers .cm-gutterElement":{paddingLeft:"var(--ifm-pre-padding)"},".cm-activeLineGutter":{backgroundColor:"var(--ifm-code-active-color)"},".cm-scroller":{fontFamily:"var(--ifm-font-family-monospace)",lineHeight:"var(--ifm-pre-line-height)",paddingTop:"var(--ifm-pre-padding)",paddingBottom:"var(--ifm-pre-padding)"},".cm-content":{padding:"0"},"& .cm-line":{paddingRight:"var(--ifm-pre-padding)"},"& .cm-selectionBackground, &.cm-focused .cm-selectionBackground, ::selection":{backgroundColor:"var(--ifm-code-selection-color)"},".cm-activeLine":{backgroundColor:"var(--ifm-code-active-color)"},".cm-selectionMatch":{backgroundColor:"var(--ifm-code-selection-color)"},".cm-foldPlaceholder":{backgroundColor:"var(--ifm-code-selection-color)",borderColor:"var(--ifm-color-emphasis-300)"},".cm-tooltip":{backgroundColor:"var(--ifm-background-surface-color)"}});var X=n(7243);class K extends Error{constructor(e,t){super(e),this.errors=t}}function Y(e,t){const n=`${t}.tsx`,o=new Set,r=[];let a,i=null;try{a=X.transform(e,{filename:n,presets:["typescript",["react",{runtime:"automatic",importSource:"@motion-canvas/2d"}]],plugins:[e=>{let{types:t}=e;return{visitor:{ImportDeclaration(e){e.node.source.value.startsWith("@motion-canvas/core")&&(e.node.source.value="@motion-canvas/core"),e.node.source.value.startsWith("@motion-canvas/2d")&&(e.node.source.value="@motion-canvas/2d")},ReferencedIdentifier(e){const{node:n,scope:a}=e;t.isIdentifier(n)&&!a.hasBinding(n.name)&&(o.add(n.name),r.push({from:n.start,to:n.end,tooltip:`Cannot find name '${n.name}'.`}))}}}}]})}catch(c){const e=/(.*) \(\d+:\d+\)/.exec(c.message.slice(n.length+1));i=e?e[1]:c.message,c.loc&&r.push({from:c.pos,to:c.pos,tooltip:i})}if(r.length>0)throw new K(i??`Cannot find names: ${Array.from(o).join(", ")}\nDid you forget to import them?`,r);return a.code}function ee(e){const[t,n]=(0,u.useState)(e?.current);return(0,u.useEffect)((()=>e&&e.subscribe(n)),[e]),t}var te=n(6109),ne=n(8888);const oe={root:"root_icgl",layoutControl:"layoutControl_X__N",icon:"icon_brRG",active:"active_qxTr",progress:"progress_HsLC",controls:"controls_R4ai",previewOnly:"previewOnly_FFUw",section:"section_UscS",disabled:"disabled_egkt",error:"error_N64d",editor:"editor_xQGp",source:"source_Dq6N",preview:"preview_C9cZ",button:"button_ESGX",picker:"picker_Whdf",codeOnly:"codeOnly_lee0"};function re(e){let{children:t,className:n,mode:w="editor",ratio:b="4"}=e;const[z,_]=(0,u.useState)(null),P=(0,u.useRef)(null),R=(0,u.useRef)(),F=(0,u.useRef)(),[H,U]=(0,u.useState)(w),{pathname:A}=(0,s.TH)(),[X,re]=(0,u.useState)(null),ae=ee(z?.onDurationChanged),ie=ee(z?.onFrameChanged),ce=ee(z?.onStateChanged),[le,se]=(0,u.useState)(null),[de,ue]=(0,u.useState)(null),me=(0,u.useMemo)((()=>{if(b.includes("/")){const e=b.split("/"),t=parseFloat(e[0])/parseFloat(e[1]);if(!isNaN(t))return t}const e=parseFloat(b);return isNaN(e)?4:e}),[b]),pe=async function(e,t){void 0===t&&(t=!0),await M(_,F.current,me,re);try{const r=await async function(e,t){const n=Y(e,t);return(await import(URL.createObjectURL(new Blob([n],{type:"text/javascript"})))).default}(e.sliceString(0),A);return o=r,C&&(C.onReplaced.current=o),ue(e),t&&!de?.eq(e)&&F.current.animate((void 0===n&&(n=4),[{boxShadow:"0 0 0px 0 #ccc inset",easing:"cubic-bezier(0.33, 1, 0.68, 1)"},{boxShadow:`0 0 0px ${n}px #ccc inset`,easing:"cubic-bezier(0.32, 0, 0.67, 0)"},{boxShadow:"0 0 0px 0 #ccc inset"}]),{duration:300}),!0}catch(r){return r instanceof K&&V(P.current,r.errors,r.message),re(r.message),z?.togglePlayback(!1),!1}var n,o},fe=async e=>{ve(e);const t=function(e){const t=q(e);let n=!1;return e.field(a.iQ,!1).between(t.from,t.to,(()=>(n=!0,!1))),n}(P.current.state);P.current.setState(ge[e].state),await pe(ge[e].state.doc),t&&W(P.current)},[he,ve]=(0,u.useState)(0),ge=(0,u.useMemo)((()=>function(e){let t={name:"Default",lines:[]};const n=[t];for(const o of e.split("\n")){const e=$.exec(o);if(!e){t.lines.push(o);continue}const[,r,a]=e;j.includes(r)||("snippet"===r?t.lines.length>0?(t={name:a,lines:[]},n.push(t)):t.name=a:t.lines.push(o))}return n}(t).map((e=>({name:e.name,state:i.yy.create({doc:i.xv.of(e.lines),extensions:[ne.Xy,c.$f.of([o.oc,{key:"Mod-s",preventDefault:!0,run:e=>(pe(e.state.doc),!0)}]),c.tk.updateListener.of((e=>{se(e.state.doc),e.docChanged&&(re(null),P.current.dispatch({effects:[I.of(null)]}))})),r.Lz.data.of({autocomplete:e=>{if("String"===(0,a.qz)(e.state).resolveInner(e.pos,-1).name)return;const t=e.matchBefore(/\w*/);return t.from!==t.to||e.explicit?{from:t.from,options:D}:null}}),a.rs.of(((e,t,n)=>q(e,{from:t,to:n}))),[B,O,J],(0,r.eJ)({jsx:!0,typescript:!0}),(0,a.nF)(G),Q]})})))),[t]);l.Z.canUseDOM||ge.forEach((e=>{Y(e.state.doc.sliceString(0),A)})),(0,u.useEffect)((()=>(P.current=new c.tk({parent:R.current,state:ge[he].state}),W(P.current),function(e,t,n,o,r){x.has(e)||(Z?.observe(t),x.set(e,{setter:e,parent:t,ratio:n,onError:o,onBorrow:r}))}(_,F.current,me,re,(async e=>{await pe(ge[he].state.doc,!1)&&"code"!==H&&e.togglePlayback(!0)})),()=>{!function(e){const t=x.get(e);t&&(Z?.unobserve(t.parent),x.delete(e)),L===e&&E&&(N.deactivate(),L=null,S=null,T.finalBuffer.remove())}(_),P.current.destroy()})),[]);const ke=(0,u.useMemo)((()=>{const e=ge[0].state,t=q(e);let n=e.doc;return t&&(n=n.replace(t.from,t.to,i.xv.of(["..."]))),n.toString()+"\n"}),[ge]),ye=de&&le&&!le.eq(de),we=le&&!le.eq(ge[he].state.doc)||ye;return u.createElement("div",{className:(0,k.Z)(oe.root,n,{[oe.codeOnly]:"code"===H,[oe.previewOnly]:"preview"===H})},u.createElement("div",{className:oe.layoutControl},u.createElement("button",{className:(0,k.Z)(oe.icon,"code"===H&&oe.active),onClick:()=>{U("code"),z?.togglePlayback(!1)},title:"Source code"},u.createElement(g.Z,null)),u.createElement("button",{className:(0,k.Z)(oe.icon,"editor"===H&&oe.active),onClick:()=>U("editor"),title:"Editor with preview"},u.createElement(v.Z,null)),u.createElement("button",{className:(0,k.Z)(oe.icon,"preview"===H&&oe.active),onClick:()=>U("preview"),title:"Preview"},u.createElement(d.Z,null))),u.createElement("div",{className:oe.preview,style:{aspectRatio:b},ref:F},!z&&u.createElement("div",null,"Press play to preview the animation")),ae>0&&u.createElement("div",{className:oe.progress,style:{width:z?ie/ae*100+"%":0}}),u.createElement("div",{className:oe.controls},u.createElement("div",{className:oe.section},ye&&u.createElement("button",{onClick:()=>pe(P.current.state.doc),className:oe.button},u.createElement("kbd",null,"CTRL"),u.createElement("kbd",null,"S"),u.createElement("small",null,"Update preview"))),u.createElement("div",{className:(0,k.Z)(oe.section,0===ae&&z&&oe.disabled)},u.createElement("button",{className:oe.icon,onClick:()=>z?.requestPreviousFrame()},u.createElement(h,null)),u.createElement("button",{className:oe.icon,onClick:async()=>{if(z){let e=!0;de||(e=await pe(P.current.state.doc)),e&&z.togglePlayback()}else{const e=await M(_,F.current,me,re);await pe(P.current.state.doc)&&e.togglePlayback(!0)}}},!z||(ce?.paused??1)?u.createElement(p,null):u.createElement(m,null)),u.createElement("button",{className:oe.icon,onClick:()=>z?.requestNextFrame()},u.createElement(f,null))),u.createElement("div",{className:oe.section},1===ge.length&&we&&u.createElement("button",{className:oe.button,onClick:()=>fe(0)},u.createElement("small",null,"Reset example")),ge.length>1&&u.createElement(y,{className:oe.picker,value:we?-1:he,onChange:fe,options:ge.map(((e,t)=>({value:t,name:e.name}))).concat(we?{value:-1,name:"Custom"}:[])}))),X&&u.createElement("pre",{className:oe.error},X),u.createElement("div",{className:oe.editor,ref:R},u.createElement(te.Z,{className:oe.source,language:"tsx"},"code"===H?ge[he].state.doc.toString():ke)))}},6030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(9817),r=n(8046),a=n(2784),i=n(4627);function c(e){let{name:t}=e;return a.createElement("a",{className:i.Z.contributor,title:t,href:`https://github.com/${t}`,target:"_blank"},a.createElement("img",{loading:"lazy",src:`https://github.com/${t}.png`,width:20,height:20,alt:`${t}'s avatar`}))}var l=n(7644);function s(e){let{user:t,pr:n,experimental:s,children:d}=e;return a.createElement("li",{className:i.Z.element},a.createElement(c,{name:t}),s&&a.createElement(o.Z,{to:"/docs/experimental",title:"Experimental feature"},a.createElement(r.Z,{className:"experimental"})),d,n&&a.createElement(l.Z,{id:n}))}},6139:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(4627),r=n(3851),a=n(2784);const i={feat:"New features \ud83c\udf89",fix:"Fixed bugs \ud83d\udc1b"},c={feat:"new-features",fix:"fixed-bugs"};function l(e){let{type:t,children:n}=e;return a.createElement(a.Fragment,null,a.createElement(r.Z,{id:c[t],as:"h3"},i[t]),a.createElement("ul",{className:o.Z.group},n))}},7644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(2784),r=n(4627);function a(e){let{id:t}=e;return o.createElement("a",{className:r.Z.pr,title:`Pull request #${t}`,href:`https://github.com/motion-canvas/motion-canvas/pull/${t}`,target:"_blank"},o.createElement("small",null,"#",t))}},2352:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>h,default:()=>b,frontMatter:()=>f,metadata:()=>v,toc:()=>k});var o=n(7896),r=(n(2784),n(876)),a=n(9817),i=n(6139),c=n(6030),l=n(7644),s=n(4974),d=n(6109),u=n(7116),m=n(7559),p=n(386);const f={slug:"version-3.15.0",title:"Motion Canvas v3.15.0",description:"Code has never been more animated.",authors:"aarthificial"},h=void 0,v={permalink:"/blog/version-3.15.0",editUrl:"https://github.com/motion-canvas/motion-canvas/blob/main/packages/docs/blog/2024-03-21-version-3.15.0.mdx",source:"@site/blog/2024-03-21-version-3.15.0.mdx",title:"Motion Canvas v3.15.0",description:"Code has never been more animated.",date:"2024-03-21T00:00:00.000Z",formattedDate:"March 21, 2024",tags:[],readingTime:2.355,hasTruncateMarker:!1,authors:[{name:"Jacob",title:"Motion Canvas Creator",url:"https://twitter.com/aarthificial",imageURL:"https://github.com/aarthificial.png",key:"aarthificial"}],frontMatter:{slug:"version-3.15.0",title:"Motion Canvas v3.15.0",description:"Code has never been more animated.",authors:"aarthificial"},nextItem:{title:"Motion Canvas v3.14.0",permalink:"/blog/version-3.14.0"}},g={authorsImageUrls:[void 0]},k=[],y={toc:k},w="wrapper";function b(e){let{components:t,...n}=e;return(0,r.kt)(w,(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(i.Z,{type:"feat",mdxType:"IssueGroup"},(0,r.kt)(c.Z,{user:"aarthificial",mdxType:"Issue"},"A brand-new"," ",(0,r.kt)(a.Z,{to:"/docs/code",mdxType:"Link"},(0,r.kt)("code",null,"Code"))," ","node with dedicated code signals, customizable syntax highlighting, and more expressive animation system (Including automatic diff-based transitions).",(0,r.kt)(l.Z,{id:946,mdxType:"PR"}),(0,r.kt)(s.Z,{mode:"preview",className:"margin-top--sm margin-bottom--sm",mdxType:"Fiddle"},u.Z)),(0,r.kt)(c.Z,{user:"aarthificial",mdxType:"Issue"},"New"," ",(0,r.kt)(a.Z,{to:"/api/2d/utils#withDefaults",mdxType:"Link"},(0,r.kt)("code",null,"withDefaults"))," ","helper function lets you quickly extend nodes with your own defaults.",(0,r.kt)(l.Z,{id:982,mdxType:"PR"}),(0,r.kt)(d.Z,{language:"ts",className:"margin-top--sm margin-bottom--sm",mdxType:"CodeBlock"},m.Z)),(0,r.kt)(c.Z,{user:"aarthificial",mdxType:"Issue"},"When using"," ",(0,r.kt)(a.Z,{to:"/api/core/flow#loop",mdxType:"Link"},(0,r.kt)("code",null,"loop")),", the iteration count can be omitted to create an infinite loop:",(0,r.kt)(l.Z,{id:952,mdxType:"PR"}),(0,r.kt)(d.Z,{language:"ts",className:"margin-top--sm margin-bottom--sm",mdxType:"CodeBlock"},p.Z)),(0,r.kt)(c.Z,{user:"aarthificial",pr:951,mdxType:"Issue"},"New"," ",(0,r.kt)(a.Z,{to:"/api/core/threading#spawn",mdxType:"Link"},(0,r.kt)("code",null,"spawn"))," ","function lets you run animations in the background, from any place, without needing to ",(0,r.kt)("code",null,"yield")," them."),(0,r.kt)(c.Z,{user:"aarthificial",pr:961,mdxType:"Issue"},(0,r.kt)(a.Z,{to:"/api/2d/components/Polygon",mdxType:"Link"},(0,r.kt)("code",null,"Polygon"))," ","now extends",(0,r.kt)(a.Z,{to:"/api/2d/components/Curve",mdxType:"Link"},(0,r.kt)("code",null,"Curve"))," giving it access to all curve-related properties like ",(0,r.kt)(a.Z,{to:"/api/2d/components/Polygon#startArrow",mdxType:"Link"},(0,r.kt)("code",null,"startArrow"))," and ",(0,r.kt)(a.Z,{to:"/api/2d/components/Polygon#radius",mdxType:"Link"},(0,r.kt)("code",null,"radius")),"."),(0,r.kt)(c.Z,{user:"jmaen",pr:962,mdxType:"Issue"},"Color fields in the editor now come with a visual color picker."),(0,r.kt)(c.Z,{user:"aarthificial",mdxType:"Issue"},"New"," ",(0,r.kt)(a.Z,{to:"/api/core/types/Vector2",mdxType:"Link"},(0,r.kt)("code",null,"Vector2"))," ","methods: ",(0,r.kt)(l.Z,{id:985,mdxType:"PR"}),(0,r.kt)("ul",null,(0,r.kt)("li",null,(0,r.kt)(a.Z,{to:"/api/core/types/Vector2#rounded",mdxType:"Link"},(0,r.kt)("code",null,"rounded"))),(0,r.kt)("li",null,(0,r.kt)(a.Z,{to:"/api/core/types/Vector2#ceiled",mdxType:"Link"},(0,r.kt)("code",null,"ceiled"))),(0,r.kt)("li",null,(0,r.kt)(a.Z,{to:"/api/core/types/Vector2#map",mdxType:"Link"},(0,r.kt)("code",null,"map"))),(0,r.kt)("li",null,(0,r.kt)(a.Z,{to:"/api/core/types/Vector2#toArray",mdxType:"Link"},(0,r.kt)("code",null,"toArray"))))),(0,r.kt)(c.Z,{user:"aarthificial",pr:988,mdxType:"Issue"},"New"," ",(0,r.kt)(a.Z,{to:"/api/2d/components/Layout#cardinalPoint",mdxType:"Link"},(0,r.kt)("code",null,"cardinalPoint"))," ","method lets you map",(0,r.kt)(a.Z,{to:"/api/core/types/Origin",mdxType:"Link"},(0,r.kt)("code",null,"Origin")),"s and ",(0,r.kt)(a.Z,{to:"/api/core/types/Direction",mdxType:"Link"},(0,r.kt)("code",null,"Direction")),"s to their corresponding cardinal points of the node."),(0,r.kt)(c.Z,{user:"aarthificial",pr:983,mdxType:"Issue"},"New"," ",(0,r.kt)(a.Z,{to:"/api/core/transitions#waitTransition",mdxType:"Link"},(0,r.kt)("code",null,"waitTransition"))," ","lets you animate transitions using nodes."),(0,r.kt)(c.Z,{user:"aarthificial",pr:984,experimental:!0,mdxType:"Issue"},"When passed to OpenGL,"," ",(0,r.kt)(a.Z,{to:"/api/core/types/Matrix2D",mdxType:"Link"},(0,r.kt)("code",null,"Matrix2D"))," ","is now converted to a 3x3 square matrix (as opposed to a 3x2 matrix)"),(0,r.kt)(c.Z,{user:"aarthificial",pr:986,mdxType:"Issue"},"The view's"," ",(0,r.kt)(a.Z,{to:"/api/2d/components/Node#cachePadding",mdxType:"Link"},(0,r.kt)("code",null,"cachePadding"))," ","is now respected when calculating the cache size of individual nodes."),(0,r.kt)(c.Z,{user:"Niikelion",pr:993,mdxType:"Issue"},"Presentation Mode now supports PowerPoint shortcuts (Page Up, Page Down, etc.)"),(0,r.kt)(c.Z,{user:"nvborisenko",pr:956,mdxType:"Issue"},"Parts of the motion-canvas-player shadow root are now exposed using"," ",(0,r.kt)("code",null,"part")," and can be customized with CSS."),(0,r.kt)(c.Z,{user:"aarthificial",pr:1001,mdxType:"Issue"},"Fiddles on this website now play automatically when scrolled into view.")),(0,r.kt)(i.Z,{type:"fix",mdxType:"IssueGroup"},(0,r.kt)(c.Z,{user:"CactusPuppy",pr:968,mdxType:"Issue"},"Account for italic fonts in cache."),(0,r.kt)(c.Z,{user:"rogerpinho",pr:974,mdxType:"Issue"},"Fix typo in the Quickstart Guide."),(0,r.kt)(c.Z,{user:"aarthificial",pr:987,mdxType:"Issue"},"Properly handle ",(0,r.kt)("code",null,"offset")," when retrieving the absolute position of a node."),(0,r.kt)(c.Z,{user:"aarthificial",pr:981,mdxType:"Issue"},"Fix the spline warning for reactive points.")),(0,r.kt)("small",null,"Check out ",(0,r.kt)(a.Z,{to:"/docs/updating",mdxType:"Link"},"the Update Guide")," for information on how to update your existing projects."))}b.isMDXComponent=!0},4627:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={contributor:"contributor_Ndjr",pr:"pr_hMGy",group:"group_CvIc",element:"element_spNy"}},7116:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="import {Code, makeScene2D} from '@motion-canvas/2d';\nimport {DEFAULT, all, createRef, waitFor} from '@motion-canvas/core';\n\nexport default makeScene2D(function* (view) {\n  const code = createRef<Code>();\n\n  view.add(\n    <Code\n      ref={code}\n      fontSize={28}\n      fontFamily={'JetBrains Mono, monospace'}\n      offsetX={-1}\n      x={-400}\n      code={'const number = 7;'}\n    />,\n  );\n\n  yield* waitFor(0.6);\n  yield* all(\n    code().code.replace(code().findFirstRange('number'), 'variable', 0.6),\n    code().code.prepend(0.6)`function example() {\\n  `,\n    code().code.append(0.6)`\\n}`,\n  );\n\n  yield* waitFor(0.6);\n  yield* code().selection(code().findFirstRange('variable'), 0.6);\n\n  yield* waitFor(0.6);\n  yield* all(\n    code().code('const number = 7;', 0.6),\n    code().selection(DEFAULT, 0.6),\n  );\n});\n"},7559:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="import {Txt, withDefaults} from '@motion-canvas/2d';\n\nexport const MyTxt = withDefaults(Txt, {\n  fill: 'rgba(255, 255, 255, 0.6)',\n  fontFamily: 'JetBrains Mono',\n  fontSize: 28,\n});\n"},386:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="// These two are equivalent:\n// prettier-ignore\nyield* loop(() => { /* animation */ });\n// prettier-ignore\nyield* loop(Infinity, () => { /* animation */ });\n"}}]);