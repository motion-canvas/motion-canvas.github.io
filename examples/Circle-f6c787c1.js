import{a6 as C,a7 as d,g as h,a8 as y,T as A,a9 as I,aa as B,K as v,P as D,i as m,s as P,q as L,v as S}from"./makeScene2D-98c5f13e.js";var $=globalThis&&globalThis.__decorate||function(r,e,t,o){var n=arguments.length,s=n<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,o);else for(var i=r.length-1;i>=0;i--)(a=r[i])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class f extends C{constructor(e,t,o,n,s,a){super(),this.startPoint=e,this.radius=t,this.xAxisRotationDegree=o,this.largeArcFlag=n,this.sweepFlag=s,this.endPoint=a,this.xAxisRotation=this.xAxisRotationDegree*d,this.radius=new h(Math.abs(t.x),Math.abs(t.y));const i=e.sub(a).div(2).transform(y.fromRotation(-o).domMatrix),l=i.x*i.x/(t.x*t.x)+i.y*i.y/(t.y*t.y);if(l>1){const M=Math.sqrt(l);t.x=M*t.x,t.y=M*t.y}const c=new h(t.ctg*i.y,t.perpendicular.ctg*i.x).scale(Math.sqrt(1/(i.x*i.x/(t.x*t.x)+i.y*i.y/(t.y*t.y))-1)*(n===s?-1:1));this.xAxisRotationMatrix=y.fromRotation(o).domMatrix,this.center=c.transform(this.xAxisRotationMatrix).add(e.add(a).div(2));const p=i.sub(c).div(t),b=i.scale(-1).sub(c).div(t);this.startAngle=p.radians,this.deltaAngle=h.angleBetween(p,b)%(Math.PI*2),this.sweepFlag===0&&this.deltaAngle>0&&(this.deltaAngle-=Math.PI*2),this.sweepFlag===1&&this.deltaAngle<0&&(this.deltaAngle+=Math.PI*2),f.el.setAttribute("d",`M ${this.startPoint.x} ${this.startPoint.y} A ${this.radius.x} ${this.radius.y} ${this.xAxisRotationDegree} ${this.largeArcFlag} ${this.sweepFlag} ${this.endPoint.x} ${this.endPoint.y}`),this.length=f.el.getTotalLength();const w=new A(f.el.getBBox());this.points=[w.topLeft,w.bottomRight]}getAnglePosition(e){return this.radius.mul(h.fromRadians(e)).transform(this.xAxisRotationMatrix).add(this.center)}getAngleDerivative(e){return new h(-this.radius.x*Math.sin(e),this.radius.y*Math.cos(e)).transform(this.xAxisRotationMatrix)}draw(e,t,o,n){const s=this.startAngle+this.deltaAngle*t,a=this.startAngle+this.deltaAngle*o,i=this.getPoint(t),l=this.getPoint(o);return n&&e.moveTo(i.position.x,i.position.y),e.ellipse(this.center.x,this.center.y,this.radius.x,this.radius.y,this.xAxisRotation,s,a,this.sweepFlag===0),[i,l]}getPoint(e){const t=this.startAngle+e*this.deltaAngle,o=this.getAngleDerivative(t).normalized;return{position:e===0?this.startPoint:e===1?this.endPoint:this.getAnglePosition(t),tangent:o,normal:o.perpendicular}}get arcLength(){return this.length}}$([I(()=>{const r=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","path");return r.appendChild(e),B.shadowRoot.appendChild(r),e})],f,"el",void 0);function z(r,e,t,o,n=!1){const s={arcLength:0,minSin:1,segments:[]};if(t<e){const p=Math.floor((e-t)/(Math.PI*2))+1;t+=Math.PI*2*p}else if(t>e+Math.PI*2){const p=Math.floor((t-e)/(Math.PI*2));t-=Math.PI*2*p}const a=(e+t)/2,i=r.mul(h.fromRadians(e)),l=r.mul(h.fromRadians(t)),c=r.mul(h.fromRadians(a)).scale(n?-1:1);return o&&u(s,new v(h.zero,i)),R(s,r,i,c,e,a,n),R(s,r,c,l,a,t,n),o&&u(s,new v(l,h.zero)),s}function u(r,e){r.segments.push(e),r.arcLength+=e.arcLength}function R(r,e,t,o,n,s,a){const i=Math.abs(n-s)<=180?1:0,l=n>s?0:1,c=a?0:1;u(r,new f(t,e,0,0,i^c^l,o))}var x=globalThis&&globalThis.__decorate||function(r,e,t,o){var n=arguments.length,s=n<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,o);else for(var i=r.length-1;i>=0;i--)(a=r[i])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let g=class extends D{constructor(e){super(e)}profile(){return z(this.size().scale(.5),this.startAngle()*d,this.endAngle()*d,this.closed(),this.counterclockwise())}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}offsetComputedLayout(e){return e}childrenBBox(){return A.fromSizeCentered(this.computedSize())}getPath(){return this.requiresProfile()?this.curveDrawingInfo().path:this.createPath()}getRipplePath(){return this.createPath(this.rippleSize())}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}createPath(e=0){const t=new Path2D,o=this.startAngle()*d;let n=this.endAngle()*d;const s=this.size().scale(.5).add(e),a=this.closed();if(n>o+Math.PI*2){const i=Math.floor((n-o)/(Math.PI*2));n-=Math.PI*2*i}return a&&t.moveTo(0,0),t.ellipse(0,0,s.x,s.y,0,o,n,this.counterclockwise()),a&&t.closePath(),t}};x([m(0),P()],g.prototype,"startAngle",void 0);x([m(360),P()],g.prototype,"endAngle",void 0);x([m(!1),P()],g.prototype,"counterclockwise",void 0);x([L()],g.prototype,"profile",null);g=x([S("Circle")],g);export{g as C};
